backend:
  name: git-gateway
  branch: main

# When using the default proxy server port
local_backend: false

media_folder: public/images/uploads # Media files will be stored in the repo under public/images/uploads
public_folder: /images/uploads # The src attribute for uploaded media will begin with /images/uploads

collections:
  - name: 'actualites' # Used in routes, e.g., /admin/collections/actualites
    label: 'Actualités' # Used in the UI
    folder: 'content/actualites' # The path to the folder where the documents are stored
    create: true # Allow users to create new documents in this collection
    slug: '{{year}}-{{month}}-{{day}}-{{slug}}' # Filename template, e.g., YYYY-MM-DD-title.md
    fields: # The fields for each document, usually in front matter
      - { label: 'Titre', name: 'title', widget: 'string' }
      - { label: 'Date de publication', name: 'date', widget: 'datetime' }
      - {
          label: 'Tags',
          name: 'tags',
          widget: 'relation',
          collection: 'tags',
          search_fields: ['name'],
          value_field: 'name',
          display_fields: ['name'],
          multiple: true,
          required: false,
        }
      - { label: 'Auteur', name: 'author', widget: 'string', default: 'ACMSI' }
      - {
          label: 'Image de couverture',
          name: 'featured_image',
          widget: 'image',
          required: false,
        }
      - { label: 'Résumé', name: 'excerpt', widget: 'text', required: false }
      - { label: 'Contenu', name: 'body', widget: 'markdown' }
      - { label: 'Publié', name: 'published', widget: 'boolean', default: true }

  - name: 'tags' # Collection pour les tags
    label: 'Tags'
    folder: 'content/tags'
    create: true
    slug: '{{slug}}'
    fields:
      - { label: 'Nom', name: 'name', widget: 'string' }
      - {
          label: 'Slug',
          name: 'slug',
          widget: 'string',
          hint: 'Identifiant unique (généré automatiquement)',
        }
      - {
          label: 'Description',
          name: 'description',
          widget: 'text',
          required: false,
        }

  - name: 'projets' # Collection pour les projets
    label: 'Projets'
    folder: 'content/projects'
    create: true
    slug: '{{slug}}'
    fields:
      - {
          label: 'Type',
          name: 'type',
          widget: 'select',
          options: ['projet_global', 'sous_projet'],
        }
      - { label: 'Nom du projet', name: 'nom', widget: 'string' }
      - {
          label: 'Description',
          name: 'description',
          widget: 'text',
          required: false,
        }
      - {
          label: 'Objectif (CHF)',
          name: 'objectif',
          widget: 'number',
          value_type: 'int',
        }
      - {
          label: 'Montant levé (CHF)',
          name: 'montant_leve',
          widget: 'number',
          value_type: 'int',
          default: 0,
        }
      - {
          label: 'Date de dernière mise à jour',
          name: 'derniere_maj',
          widget: 'datetime',
          default: '',
        }
      - {
          label: 'Priorité',
          name: 'priorite',
          widget: 'number',
          value_type: 'int',
          default: 1,
          required: false,
        }
      - {
          label: "Date d'accomplissement",
          name: 'date_accomplissement',
          widget: 'datetime',
          required: false,
          hint: 'Laisser vide si le projet est encore en cours. Une fois définie, le projet est considéré comme accompli.',
        }
      - {
          label: 'Échéance souhaitée',
          name: 'date_fin_prevue',
          widget: 'date',
          required: false,
        }
      - {
          label: "Format d'affichage échéance",
          name: 'echeance_format',
          widget: 'select',
          options:
            [
              { label: 'Trimestre (ex: Q1 2024)', value: 'quarter' },
              { label: 'Mois (ex: janvier 2024)', value: 'month' },
              { label: 'Date complète (ex: 15.01.2024)', value: 'full' },
            ],
          default: 'quarter',
          required: false,
          hint: "Format d'affichage pour l'échéance dans l'interface utilisateur",
        }
      - {
          label: 'Galerie photo',
          name: 'gallery',
          widget: 'relation',
          collection: 'galleries',
          search_fields: ['name', 'slug'],
          value_field: 'slug',
          display_fields: ['name', 'type'],
          required: false,
          hint: 'Sélectionner une galerie photo à afficher sur cette page de projet',
        }
      - { label: 'Contenu', name: 'body', widget: 'markdown' }

  - name: 'galleries' # Collection pour les galeries photo
    label: 'Galeries Photo'
    folder: 'content/galleries'
    create: true
    slug: '{{slug}}'
    fields:
      - { label: 'Nom de la galerie', name: 'name', widget: 'string' }
      - {
          label: 'Slug',
          name: 'slug',
          widget: 'string',
          hint: 'Identifiant unique (ex: mosquee-photos)',
        }
      - {
          label: 'Type de galerie',
          name: 'type',
          widget: 'select',
          options: ['mosque', 'renovations', 'historical', 'events', 'other'],
          default: 'mosque',
        }
      - {
          label: 'Description',
          name: 'description',
          widget: 'text',
          required: false,
        }
      - {
          label: 'Photos',
          name: 'photos',
          widget: 'list',
          fields:
            [
              { label: 'Image', name: 'image', widget: 'image' },
              {
                label: 'Titre',
                name: 'title',
                widget: 'string',
                required: false,
              },
              {
                label: 'Description',
                name: 'description',
                widget: 'text',
                required: false,
              },
              {
                label: 'Photographe',
                name: 'photographer',
                widget: 'string',
                required: false,
              },
              { label: 'Date', name: 'date', widget: 'date', required: false },
              {
                label: 'Texte alternatif',
                name: 'alt',
                widget: 'string',
                required: false,
                hint: 'Description de l&apos;image pour l&apos;accessibilité',
              },
            ],
        }
      - {
          label: 'Ordre d&apos;affichage',
          name: 'order',
          widget: 'number',
          value_type: 'int',
          default: 1,
        }
      - { label: 'Publié', name: 'published', widget: 'boolean', default: true }
